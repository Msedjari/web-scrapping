<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ "Administrar Equipos" }}</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Vincular CSS de Bootstrap 5 desde CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos para pantallas con un ancho máximo de 768px */
        @media (max-width: 768px) {
            .table td, .table th {
                padding: 10px;
            }
        }

        /* Estilos para pantallas con un ancho máximo de 576px */
        @media (max-width: 576px) {
            .card {
                padding: 15px;
            }
            .form-label {
                font-size: 14px;
            }
            .btn {
                width: 100%;
                margin-top: 10px;
            }
        }

        /* Estilo para hacer la tabla responsive */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Estilo para el cuerpo de la tarjeta */
        .card-body {
            padding: 2rem;
        }

        /* Estilo para los controles de formulario */
        .form-control {
            font-size: 14px;
        }
    </style>
</head>
<body class="container mt-5">
    <!-- Botones para cambiar el idioma -->
    <div class="d-flex justify-content-between">
        <a href="?lang=es" class="btn btn-primary">Español</a>
        <a href="?lang=en" class="btn btn-primary">English</a>
    </div>

    <!-- Título principal de la página -->
    <h1 class="mb-4 text-center">Panel de Administración</h1>
    
    <!-- Navegación con enlaces para registrarse o cerrar sesión -->
    <nav class="mb-3">
        <a href="register" class="btn btn-secondary">Registrarse</a>
        <a href="/logout" class="btn btn-danger">Cerrar sesión</a>
        <a href="/adminDashboard" class="btn btn-primary">Volver al Dashboard</a>
    </nav>

    <!-- Mostrar mensaje de éxito si existe -->
    {% if mensaje %}
        <div class="alert alert-success">{{ mensaje }}</div>
    {% endif %}

    <!-- Título para editar o agregar un equipo -->
    <h2 class="mb-3">
        Buscar Equipo por ID o Nombre o Liga
    </h2>
    
    <!-- Formulario para buscar equipos por ID, nombre o liga -->
    <form method="GET" class="card p-4 shadow" id="searchForm">
        <div class="mb-3">
            <label class="form-label">Buscar Equipo por ID, Nombre o Liga</label>
            <input type="text" class="form-control" id="searchInput" placeholder="Ingrese el ID, nombre o liga del equipo" required>
        </div>

        <button type="submit" class="btn btn-success w-100">Buscar</button>
    </form>

    <!-- Título para la lista de equipos -->
    <h2 class="mt-5">Lista de Equipos Buscados</h2>
    <div class="table-responsive">
        <table class="table table-striped text-center align-middle" id="teamsTable">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre del Equipo</th>
                    <th>Liga</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for team in teams %}
                <tr>
                    <td>{{ team.id }}</td>
                    <td>{{ team.club_name }}</td>
                    <td>{{ team.league }}</td>
                    <td>
                        <a href="/adminEquiposId/details/{{ team.id }}" class="btn btn-info btn-sm">Detalles</a>
                        <a href="/adminEquiposId/edit/{{ team.id }}" class="btn btn-warning btn-sm">Editar</a>
                        <a href="/adminEquiposId/delete/{{ team.id }}" class="btn btn-danger btn-sm">Eliminar</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Script de Bootstrap para la funcionalidad de la página -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('searchForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#teamsTable tbody tr');
            let found = false;

            rows.forEach(row => {
                const id = row.cells[0].textContent.toLowerCase();
                const clubName = row.cells[1].textContent.toLowerCase();
                const league = row.cells[2].textContent.toLowerCase();

                if (id.includes(searchValue) || clubName.includes(searchValue) || league.includes(searchValue)) {
                    row.style.display = '';
                    found = true;
                } else {
                    row.style.display = 'none';
                }
            });

            if (!found) {
                const noResultRow = document.createElement('tr');
                noResultRow.innerHTML = '<td colspan="4">No se encontró ningún equipo con los criterios de búsqueda.</td>';
                document.querySelector('#teamsTable tbody').appendChild(noResultRow);
            }
        });
    </script>

    <!-- Título para la lista de equipos -->
    <h2 class="mt-5">Lista de Equipos</h2>
    <div class="table-responsive">
        <table class="table table-striped text-center align-middle">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre del Equipo</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Iterar sobre cada equipo y mostrar sus detalles -->
                {% for team in teams %}
                {% if search is empty or team.id == search or team.club_name matches '/.*' ~ search ~ '.*/i' %}
                <tr>
                    <td>{{ team.id }}</td>
                    <td>{{ team.club_name }}</td>
                    <td>
                        <a href="/adminEquiposId/details/{{ team.id }}" class="btn btn-info btn-sm">Detalles</a>
                        <a href="/adminEquiposId/edit/{{ team.id }}" class="btn btn-warning btn-sm">Editar</a>
                        <a href="/adminEquiposId/delete/{{ team.id }}" class="btn btn-danger btn-sm">Eliminar</a>
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Script de Bootstrap -->
    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
