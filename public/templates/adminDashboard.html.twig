<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Meta etiquetas para la codificación de caracteres y la configuración del viewport -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración de Fastscore</title> <!-- Título de la página -->

    <!-- Enlace a los estilos de Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Estilos responsivos para diferentes tamaños de pantalla */
        @media (max-width: 768px) {
            .table td, .table th {
                padding: 10px;
            }
        }

        @media (max-width: 576px) {
            .card {
                padding: 15px;
            }
            .form-label {
                font-size: 14px;
            }
            .btn {
                width: 100%;
                margin-top: 10px;
            }
        }

        /* Estilo para la tabla cuando es muy grande */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .card-body {
            padding: 2rem;
        }

        .form-control {
            font-size: 14px;
        }
    </style>
</head>
<body class="container mt-5">

    <!-- Contenedor para los botones de cambio de idioma -->
    <div class="d-flex justify-content-between">
        <a href="?lang=es" class="btn btn-primary">Español</a>
        <a href="?lang=en" class="btn btn-primary">English</a>
    </div>

    <!-- Título de la página de administración -->
    <h1 class="mb-4 text-center">Panel de Administración</h1>

    <!-- Enlace a las secciones para editar -->
    <nav class="mb-3">
        <a href="/adminEquipos" class="btn btn-primary">Editar Equipos</a>
        <a href="register" class="btn btn-secondary">Registrarse</a>
        <a href="/logout" class="btn btn-danger">Cerrar sesión</a>
    </nav>

    <!-- Mostrar mensaje si existe -->
    {% if mensaje %}
        <div class="alert alert-success">{{ mensaje }}</div>
    {% endif %}

    <!-- Formulario para agregar o editar información -->
    <h2 class="mb-3">
        {% if id is defined %}Editar Información{% endif %}
    </h2>

    <form method="GET" class="card p-4 shadow" id="searchForm">
        <!-- Formulario para buscar equipos por ID, nombre o liga -->
        <div class="mb-3">
            <label class="form-label">Buscar Equipo por ID, Nombre o Liga</label>
            <input type="text" class="form-control" id="searchInput" placeholder="Ingrese el ID, nombre o liga del equipo" required>
        </div>

        <!-- Botón para buscar el equipo -->
        <button type="submit" class="btn btn-success w-100">Buscar</button>
    </form>

    <!-- Título para la lista de equipos -->
    <h2 class="mt-5">Lista de Equipos</h2>
    <div class="table-responsive">
        <table class="table table-striped text-center align-middle" id="teamsTable">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre del Equipo</th>
                    <th>Liga</th>
                </tr>
            </thead>
            <tbody>
                {% for team in teams %}
                <tr>
                    <td>{{ team.id }}</td>
                    <td>{{ team.club_name }}</td>
                    <td>{{ team.league }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Script de Bootstrap para la funcionalidad de la página -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('searchForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#teamsTable tbody tr');
            let found = false;

            rows.forEach(row => {
                const id = row.cells[0].textContent.toLowerCase();
                const clubName = row.cells[1].textContent.toLowerCase();
                const league = row.cells[2].textContent.toLowerCase();

                if (id.includes(searchValue) || clubName.includes(searchValue) || league.includes(searchValue)) {
                    row.style.display = '';
                    found = true;
                } else {
                    row.style.display = 'none';
                }
            });

            if (!found) {
                const noResultRow = document.createElement('tr');
                noResultRow.innerHTML = '<td colspan="3">No se encontró ningún equipo con los criterios de búsqueda.</td>';
                document.querySelector('#teamsTable tbody').appendChild(noResultRow);
            }
        });
    </script>
</body>
</html>